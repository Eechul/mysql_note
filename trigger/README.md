# Mysql note - Trigger (트리거)

mysql 트리거 정리

## Table of Contents

- [트리거란?](#트리거란?)
- [기본구조](#기본구조)
- [종류](#종류)
- [키워드](#키워드)
- [이벤트 속성](#이벤트-속성)
- [트리거 내용(BEGIN~END 코드)에서 사용되는 키워드](#트리거-내용(BEGIN~END-코드)에서-사용되는-키워드)
- [기타 트리거](#기타-트리거)
- [트리거 작동 순서](#트리거-작동-순서)
- [쓰임새](#쓰임새)

## 트리거란?
- 특정 조건(쿼리 실행 전이나 후)을 만족하면 저절로 실행되는 장치
- 방아쇠를 떠올리자. 방아쇠를 당기면 **(특정조건 만족)**, 총알이 나간다 **(저절로 실행)**

## 기본구조
```SQL
DELIMITER $$
    CREATE TRIGGER trigger_name
    {BEFORE | AFTER} {INSERT | UPDATE | DELETE}
    ON table_name FOR EACH ROW
    BEGIN
        -- 트리거 내용(코드)
    END
DELIMITER ;
```

## 종류
- 행 트리거: 테이블의 행 각각 실행된다.
- 문장 트리거: INSERT, UPDATE, DELETE 문에 대해서 한번만 실행된다.

## 이벤트 속성
- 트리거 작동 시점
  - BEFORE: **이벤트 발생 전**, 트리거 내용 실행
  - AFTER: **이벤트 발생 후**, 트리거 내용 실행

- 이벤트
  - INSERT: 트리거 내용이 **INSERT문 동작 전 or 후**에 동작한다.
  - UPDATE: 트리거 내용이 **UPDATE문 동작 전 or 후**에 동작한다.
  - DELETE: 트리거 내용이 **DELETE문 동작 전 or 후**에 동작한다.

## 트리거 내용(BEGIN~END 코드)에서 사용되는 키워드
- old
  - 이벤트가 INSERT 일 경우, **새로 삽입하는 것이기에 값이 오지 않는다**
  - 이벤트가 UPDATE 일 경우, **변경되기 전 값**
  - 이벤트가 DELETE 일 경우, **삭제되기 전 값**
  
- new
  - 이벤트가 INSERT 일 경우, **삽입된 새로운 값**
  - 이벤트가 UPDATE 일 경우, **변경된 후 값**
  - 이벤트가 DELETE 일 경우, **값이 삭제 됐으므로, 값이 오지 않는다.**

## 기타 트리거
- 정리중

## 트리거 작동 순서
- 정리중

## 쓰임새
- 특정 테이블에 대한 이벤트별 로그 기록
- 데이터 임시 저장기능

